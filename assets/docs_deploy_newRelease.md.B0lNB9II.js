import{_ as s,c as i,o as a,a4 as e}from"./chunks/framework.BPyCXYKG.js";const g=JSON.parse('{"title":"New Release","description":"","frontmatter":{},"headers":[],"relativePath":"docs/deploy/newRelease.md","filePath":"docs/deploy/newRelease.md"}'),n={name:"docs/deploy/newRelease.md"},t=e(`<h1 id="new-release" tabindex="-1">New Release <a class="header-anchor" href="#new-release" aria-label="Permalink to &quot;New Release&quot;">​</a></h1><p>When creating a new release, there are a few things to remember</p><h2 id="to-create-a-new-version" tabindex="-1">To create a new version <a class="header-anchor" href="#to-create-a-new-version" aria-label="Permalink to &quot;To create a new version&quot;">​</a></h2><ul><li>Change the version number in the <code>package.json</code> file</li><li>Update the <code>CHANGELOG.md</code> with all the changes</li><li>Create a <a href="https://github.com/NMSUD/Form/compare/main...develop" target="_blank" rel="noreferrer">pull request</a> in the Github Repo</li></ul><h2 id="deploying-the-new-version" tabindex="-1">Deploying the new version <a class="header-anchor" href="#deploying-the-new-version" aria-label="Permalink to &quot;Deploying the new version&quot;">​</a></h2><ul><li>SSH into the machine</li><li>run <code>docker pull &lt;registry&gt;/&lt;tagName&gt;</code></li><li>run <code>docker compose up -d --force-recreate</code></li></ul><div align="center"><h3 id="or" tabindex="-1">OR <a class="header-anchor" href="#or" aria-label="Permalink to &quot;OR&quot;">​</a></h3></div><p>Use the file <a href="https://github.com/NMSUD/Form/blob/main/scripts/docker/pullLatestAndRecreate.sh" target="_blank" rel="noreferrer">pullLatestAndRecreate.sh</a></p><details class="details custom-block"><summary>View contents</summary><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#!/bin/bash</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ENV_FILE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;./.env&quot;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [ </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$ENV_FILE</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ]; </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">then</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> $(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">grep</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -v</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;^#&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> $ENV_FILE </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> xargs</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -d</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;\\r&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">else</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    echo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;.env file does not exist&quot;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    exit</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">fi</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">echo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;registry: </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$DOCKER_REGISTRY</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">echo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;tag name: </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$DOCKER_TAG_NAME</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ----------------------------------------------------------------------</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> pull</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> $DOCKER_REGISTRY</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$DOCKER_TAG_NAME</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">:latest</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> compose</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> up</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -d</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --force-recreate</span></span></code></pre></div></details>`,9),l=[t];function h(p,k,r,o,d,c){return a(),i("div",null,l)}const E=s(n,[["render",h]]);export{g as __pageData,E as default};
